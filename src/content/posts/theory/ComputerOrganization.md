---
title: Computer Organization & Design Introduction 🚀
published: 2024-07-19
description: "计算机组成原理概述"
tags: ["theory", "Computer Organization", "computer basics"]
category: theory
draft: false
---

## 1. history of computer development 📜

计算机的发展源于人类对计算需求的持续增长与复杂化。早期，为满足贸易和日常活动中快速高效的简单计算需求，人类发明了**算盘**🧮。随着计算任务的复杂化，人类设计了更先进的机械计算机，例如：

- **帕斯卡计算器（1642）**：支持加减运算。
- **巴贝奇差分机（1822）**：用于生成多项式数值表。

随着技术的进步与发展，计算机技术也从**机械时代**迈向了**电子时代**。

按照逻辑电路的**复杂程度**电子计算机的发展史可划分为以下四个时期。

| 时期                 | 时间范围  | 核心元件         | 核心特点                                                | 运算速度       |
| -------------------- | --------- | ---------------- | ------------------------------------------------------- | -------------- |
| **电子管时代**       | 1946-1957 | 真空电子管       | 📏 体积庞大<br>🔥 功耗高<br>⚠️ 可靠性差                 | 每秒几千次     |
| **晶体管时代**       | 1958-1964 | 分立式晶体管     | 📏 体积缩小 50 倍<br>⚡ 功耗降低 90%<br>💻 高级语言诞生 | 每秒几十万次   |
| **中小规模 IC 时代** | 1965-1970 | 中小规模集成电路 | 📏 再缩小 10 倍<br>💰 成本下降<br>💾 半导体存储器普及   | 每秒百万次     |
| **大规模 IC 时代**   | 1971-至今 | LSI/VLSI/ULSI    | 🔬 微型化（纳米级）<br>⚡ 低功耗<br>🚀 并行与智能计算   | 每秒万亿次以上 |

## 2. Foundations of Modern Computing 🚀

### The Evolution of Computing Power ⚙️

机械计算装置依赖齿轮传动，运算速度受限于物理摩擦和惯性 😓。如果换用更快速、灵活的介质，比如电信号 ⚡️，信息传递和处理的速度就能大幅提升！电信号在电路中几乎以光速传输，效率极高。早在 1847 年，乔治·布尔的《逻辑的数学分析》就奠定了基础，证明逻辑运算（AND、OR、NOT）可以用数学形式表达 📚。

克劳德·香农进一步将布尔逻辑与电信号结合，成功构建了高效处理逻辑和数学运算的机器原型 🛠️。而图灵则提出了通用计算模型：只要机器能执行基本的逻辑和算术操作，并拥有足够存储空间，就能解决任何可计算问题 🌍。这为现代计算机的诞生铺平了道路！

### Von Neumann Architecture: The Heart of Computers 🧠

有了通用电子计算机的理论基础，冯·诺依曼提出了一个优雅的架构设计——**冯·诺依曼架构**，成为现代计算机的蓝图 📐。他用抽象的方式看待计算，将其分解为三个核心部分：**输入数据**、**处理规则（程序）** 和 **输出结果**。任何计算设备的关键在于如何高效组织数据和指令 💡。

一个完整的计算任务可以拆分为以下基本步骤：

1. **读取指令**：从存储器获取下一条指令 📖。
2. **理解指令**：解码指令含义 🔍。
3. **执行操作**：处理数据，进行算术或逻辑运算 ⚙️。
4. **存储结果**：将计算结果保存 💾。
5. **循环执行**：返回第一步，直到程序结束 🔄。

这个循环就是“**存储程序控制**”的核心逻辑 🎮，让机器能自动按顺序执行指令，无需人工干预。这正是现代计算机“自动化”的基石！✨

### Core Components of a Computer 🖥️

要实现上述流程，计算机需要以下核心部件：

- **存储器（Memory）** 💿：存储程序和数据，统一采用二进制格式，需支持快速访问以确保高效读取。
- **算术逻辑单元（ALU）** 🧮：负责执行算术和逻辑运算。
- **控制单元（Control Unit）** 🎛️：协调指令的获取、解码和执行。
- **输入/输出设备（I/O）** 🔌：与外部世界交互，接收输入并输出结果。
- **总线（Bus）** 🛤️：连接各部件，传输数据和指令。

### The Power of Stored Programs 🌟

如果用硬连线定义计算逻辑，每次更改任务都需要重新配置电路，费时又费力 😫，还限制了机器的灵活性。冯·诺依曼的突破在于将程序与数据一样，统一存储为二进制格式 💾。这样，程序可以像数据一样被修改、替换或传输，机器无需重新布线就能执行新任务 🚀。

统一存储不仅简化了硬件设计，还降低了复杂性。程序和数据共用一个存储系统，让计算机变得更灵活、更高效。这就是现代计算机的“魔法”所在！✨

## 3. Core Components of a Computer: Structure and Function 🖥️

存储器分为**主存（内存）**和**辅存（外存）**，`CPU` 能直接访问主存。辅存中的信息必须调入内存后才能为 CPU 访问。主存的工作方式是按存储单元的地址进行存取。这种方式称为按地址存取。

主存储器工作组成主要包括存储器地址寄存器`MAR`、存储器数据寄存器`MDR`、存储体、时序控制逻辑。

- **存储器地址寄存器（MAR）** 📍：存放访问地址经过地址译码后找到所选的存储单元。其位数反应最多存储单元个数。MAR 的长度与 PC 的长度相等。
- **存储器数据寄存器（MDR）** 📦：暂存读写数据。MDR 位数通常等于存储字长。

:::tip  
MAR 和 MDR 随是存储器一部分，但在现代计算机中是位于 CPU 内。  
:::

- **存储体** 💽：存放二进制信息，它由很多存储单元组成。每个存储单元包含若干个存储元件。存储元件存储一位二进制代码。将存储单元中的一串二进制代码称为`存储字`。这串二进制代码的位数称为`存储字长`。
- **时序控制逻辑** ⏱️：生成操作所需的时序信号。

:::note[存储器工作流程]  
根据 PC 取指令到 IR，将 PC 内容送入 MAR，MAR 的内容会直接送入地址线。控制器将读信号送入读写信号线，主存储器根据地址进行地址译码和读信号，将从指定存储单元读出指令并传到数据线上；MDR 从数据线上接收指令信息并传送到 IR 中。
试着说出主存写入的工作流程吧！！！  
:::

---

运算器是计算机的执行部件用来进行算术和逻辑运算。运算器的核心是算术逻辑单元 `ALU`。它还包含若干通用寄存器，用来暂存操作数和中间结果。如累加器`ACC`、乘商寄存器`MQ`、操作数寄存器`X`、变址寄存器`IX`、基址寄存器`BR`。前三是必须具备。

此外，还有**标志寄存器（PSW）**存储状态信息，如运算结果的正负或溢出情况 📊。

---

控制器是指挥中心用来协调部件工作。主要有程序计数器`PC`、指令寄存器`IR`、控制单元`CU`组成。

- `PC`存放欲执行指令地址。具有自动加一功能即自动形成下条指令地址。它与 MAR 之间有条直接通路。
- `IR`存放当前指令，内容主要来自与 MDR。

:::note
指令中操作码 OP（IR）送至 CU，用以分析指令发出微操作命令序列。
而地址码 AD（IR）送至 MAR 用于取操作数。
:::

:::tip
运算器、控制器及 MAR 和 MDR 集成同一芯片称为 CPU。
CPU 和主存共同构成主机。其它硬件设备 IO、外存称为外部设备。
:::

---

CPU 和主存之间通过一组总线相连。总线中有数据、地址、控制三组信号线。

## 4. Basic Computer Languages and the C Compilation Process 🚀

### Translator

- **汇编器**是将汇编语言翻译成机器语言的工具 🔧。它逐行转换助记符为二进制指令，生成可直接执行的机器码文件。

- **解释器**逐行读取高级语言代码并立即执行 🚀。不生成独立可执行文件，灵活但效率较低（如 Python、JavaScript）。

- **编译器**将整个高级语言程序一次性转换为机器码或中间代码 🏗️。生成独立的可执行文件，运行效率高（如 C、Java 的 javac）。

### Levels of Programming Languages 📚

- **机器语言** 💾：纯二进制（0 和 1），计算机直接理解。
- **汇编语言** 📝：用助记符替代二进制，需汇编器翻译。
- **高级语言** 💡：接近自然语言，易于人类编写（如 Python、C、Java）。

### The C Compilation Process Explained 🛠️

1. **预处理（Preprocessing）** 🧹  
   预处理器处理代码中的指令（以 `#` 开头，如 `#include`），展开宏定义、包含头文件，并移除注释。输出的是“纯净”的 C 代码。

2. **编译（Compilation）** 📝  
   编译器将预处理后的代码翻译成汇编语言，生成特定于目标平台的低级代码。

3. **汇编（Assembly）** 🔩  
   汇编器将汇编代码转化为机器码，生成目标文件（.o 或 .obj）。

4. **链接（Linking）** 🔗  
   链接器将多个目标文件和库文件合并，生成最终的可执行文件（如 .exe）。它确保所有代码片段和依赖项正确连接，准备好运行！

:::note[指令的执行过程]  
以**取数指令**为例：
1. **取指令**：根据 PC 取指令到 IR。将 PC 的内容送 MAR，MAR 中的内容直接送地址线，同时控制器将读信号送读/写信号线，主存储器根据地址线上的地址和读信号，从指定存储单元读出指令，送到数据线上，MDR 从数据线接受指令，并传送到 IR 📜。    
2. **分析指令**： OP（IR）➔CU，指令译码并送出控制信号。控制器根据 IR 中指令的操作码生成相应的控制信号🎛️送到不同的执行部件。本例中是取数指令因此将读控制信号送到总线的控制线上。  
3. **执行操作**： Ad（IR）➔MAR➔M➔MDR➔ACC，取数操作将 IR 中指令的地址码送 MDR，MDR 中内容到地址线，同时控制器将读信号送读/写信号线，从主存中读出操作数，通过数据线送至 MDR，再送到 ACC 💾。
4. **准备下一指令**：PC加一，更新下一指令地址 🔄。 
:::


